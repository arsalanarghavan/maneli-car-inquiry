# 📖 راهنمای استفاده از صفحه تنظیمات

## نحوه دسترسی به صفحه تنظیمات

### روش 1: از طریق شورت‌کد
در هر صفحه یا پست وردپرس، شورت‌کد زیر را قرار دهید:

```
[maneli_settings]
```

### روش 2: ایجاد صفحه اختصاصی
1. به **صفحات > افزودن** بروید
2. عنوان صفحه را "تنظیمات پلاگین" یا هر نام دیگری وارد کنید
3. در محتوای صفحه، فقط شورت‌کد `[maneli_settings]` را بنویسید
4. صفحه را منتشر کنید
5. آدرس صفحه را در نوار آدرس مرورگر کپی کنید

---

## 🎯 ساختار تب‌ها

### 1️⃣ تب "مالی و ماشین‌حساب" 💰
**محتوا**:
- تنظیمات نرخ بهره ماهانه برای محاسبات اقساط

**کاربرد**:
- تعیین نرخ بهره ماهانه (مثلاً 0.035 برای 3.5٪)
- این نرخ در تمام محاسبات اقساط استفاده می‌شود

---

### 2️⃣ تب "درگاه پرداخت" 💳
**محتوا**:
- فعال/غیرفعال کردن درگاه پرداخت
- تعیین هزینه استعلام (تومان)
- تنظیمات کد تخفیف 100٪
- پیکربندی Sadad (بانک ملی)
- پیکربندی Zarinpal

**نکات مهم**:
- اگر هزینه استعلام 0 باشد، درخواست‌ها رایگان هستند
- کلید رمزنگاری Sadad به صورت ایمن ذخیره می‌شود

---

### 3️⃣ تب "پیامک" 📱
**محتوا**:
- اطلاعات پنل MeliPayamak
- کدهای الگو (Pattern Code) برای انواع پیامک‌ها
- شماره موبایل مدیر برای دریافت اعلان‌ها

**الگوهای پیامک**:
1. اعلان درخواست جدید برای مدیر
2. در انتظار بررسی (اقساطی)
3. تأیید (اقساطی)
4. رد (اقساطی)
5. ارجاع به کارشناس (اقساطی)
6. تأیید درخواست نقدی
7. رد درخواست نقدی
8. ارجاع به کارشناس (نقدی)

---

### 4️⃣ تب "درخواست نقدی" 💵
**محتوا**:
- دلایل رد از پیش تعریف شده

**نحوه استفاده**:
- هر دلیل را در یک خط جداگانه وارد کنید
- این دلایل به عنوان لیست به مدیر هنگام رد درخواست نمایش داده می‌شوند

---

### 5️⃣ تب "درخواست اقساطی" 🚗
**محتوا**:
- پیام هشدار قیمت
- پیام در انتظار بررسی
- پیام پس از تأیید
- تنظیمات وضعیت‌های کارشناس
- دلایل رد اقساطی

**نکات**:
- وضعیت‌های کارشناس به فرمت: `key|label|#color`
- مثال: `approved|تأیید شده|#10B981`

---

### 6️⃣ تب "کارشناسان" 👥
**محتوا**:
- لیست تمام کارشناسان با نقش "Maneli Expert"
- نمایش نام، ایمیل و شماره موبایل

**نکات مهم**:
- این تب فقط برای نمایش است و فیلد قابل ویرایشی ندارد
- برای افزودن کارشناس جدید:
  1. به **کاربران > افزودن** بروید
  2. کاربر جدید با نقش "Maneli Expert" ایجاد کنید
  3. شماره موبایل را در پروفایل وارد کنید
- درخواست‌ها به صورت Round-robin به کارشناسان تخصیص داده می‌شوند

---

### 7️⃣ تب "فینوتکس" 🏦
**محتوا**:
- فعال/غیرفعال کردن سرویس استعلام چک
- شناسه کلاینت (Client ID)
- کلید API (Access Token)

**نکات امنیتی**:
- اطلاعات ورودی به صورت رمزنگاری شده ذخیره می‌شوند
- از فیلد password برای امنیت بیشتر استفاده شده است

---

### 8️⃣ تب "جلسات و تقویم" 📅
**محتوا**:
- فعال/غیرفعال کردن قابلیت جلسات
- ساعت شروع روز کاری (مثلاً 10:00)
- ساعت پایان روز کاری (مثلاً 20:00)
- مدت زمان هر بازه (دقیقه)

**کاربرد**:
- تنظیم ساعات کاری برای رزرو وقت ملاقات
- تعیین طول هر بازه زمانی (مثلاً 30 دقیقه)

---

## 💾 ذخیره تنظیمات

1. پس از ویرایش هر تب، به انتهای صفحه بروید
2. دکمه **"ذخیره تغییرات"** را کلیک کنید
3. پیام موفقیت در بالای صفحه نمایش داده می‌شود
4. تنظیمات بلافاصله اعمال می‌شوند

**نکته**: دکمه ذخیره برای همه تب‌ها یکسان است و تمام تغییرات را به یکباره ذخیره می‌کند.

---

## 🔒 امنیت

### فیلدهای رمزنگاری شده:
1. شناسه کلاینت فینوتکس
2. کلید API فینوتکس
3. کلید رمزنگاری Sadad

این فیلدها با الگوریتم **AES-256-CBC** رمزنگاری شده و در دیتابیس ذخیره می‌شوند.

### دسترسی:
فقط کاربرانی که قابلیت `manage_maneli_inquiries` را دارند می‌توانند به این صفحه دسترسی داشته باشند.

---

## 📱 نمایش در موبایل

صفحه تنظیمات کاملاً **Responsive** است:

### دسکتاپ:
- تب‌ها در sidebar سمت راست
- محتوای فرم در سمت چپ

### تبلت:
- تب‌ها در بالای صفحه به صورت افقی
- محتوا در پایین

### موبایل:
- تب‌ها به صورت عمودی یک زیر دیگری
- جداول فرم به حالت Stack
- هدرهای جدول با data-title نمایش داده می‌شوند

---

## ⚡ نکات عملکردی

1. **Cache مرورگر**: پس از به‌روزرسانی پلاگین، Cache را پاک کنید (Ctrl+Shift+R)
2. **انیمیشن‌ها**: از CSS3 Animations استفاده شده برای عملکرد بهتر
3. **Lazy Loading**: تنها محتوای تب فعال نمایش داده می‌شود
4. **Smooth Scrolling**: در صورت محتوای طولانی، اسکرول نرم فعال است

---

## 🆘 عیب‌یابی

### مشکل: صفحه تنظیمات خالی است
**راه حل**:
- مطمئن شوید که قابلیت `manage_maneli_inquiries` را دارید
- Cache پلاگین/مرورگر را پاک کنید
- پلاگین را غیرفعال و دوباره فعال کنید

### مشکل: استایل‌ها درست نیست
**راه حل**:
- مطمئن شوید که فایل `/assets/css/frontend.css` وجود دارد
- Cache CSS را پاک کنید
- Developer Tools مرورگر را باز کنید و بررسی کنید که CSS بارگذاری شده است

### مشکل: تب‌ها کار نمی‌کنند
**راه حل**:
- مطمئن شوید که jQuery بارگذاری شده است
- فایل `/assets/js/frontend/admin-settings.js` را بررسی کنید
- Console مرورگر را برای خطاهای JavaScript چک کنید

---

## 📞 پشتیبانی

برای هرگونه سؤال یا مشکل، با توسعه‌دهنده پلاگین تماس بگیرید.

---

**نسخه راهنما**: 1.0  
**آخرین به‌روزرسانی**: 15 اکتبر 2025

