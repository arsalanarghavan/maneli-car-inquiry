# راهنمای نصب و فعال‌سازی ترجمه فارسی

## مشکل: افزونه به فارسی ترجمه نمی‌شود

اگر همه چیز انگلیسی است، این مراحل را دنبال کنید:

---

## ✅ مرحله 1: بررسی زبان وردپرس

### روش 1: از پنل مدیریت
1. به `تنظیمات > عمومی` (Settings > General) بروید
2. در قسمت "زبان سایت" (Site Language) گزینه **فارسی** را انتخاب کنید
3. روی "ذخیره تغییرات" کلیک کنید

### روش 2: ویرایش wp-config.php
فایل `wp-config.php` را باز کنید و این خط را اضافه کنید:

```php
define('WPLANG', 'fa_IR');
```

یا اگر وجود دارد، مطمئن شوید که خالی نیست:
```php
// اشتباه - باعث انگلیسی ماندن می‌شود
define('WPLANG', '');

// درست - فارسی می‌شود
define('WPLANG', 'fa_IR');
```

---

## ✅ مرحله 2: بررسی فایل‌های ترجمه

### فایل‌های مورد نیاز در پوشه `languages/`:
- ✓ `maneli-car-inquiry-fa_IR.mo` (مهم!)
- ✓ `maneli-car-inquiry-fa_IR.po`
- ✓ `maneli-car-inquiry-fa.mo` (برای سازگاری)
- ✓ `maneli-car-inquiry-fa.po`

**نکته مهم:** فایل `.mo` الزامی است! فایل `.po` فقط برای ویرایش است.

---

## ✅ مرحله 3: آپلود فایل‌ها به سرور

فایل‌های زیر را به سرور آپلود کنید:

### 1. فایل‌های ترجمه
```
wp-content/plugins/maneli-car-inquiry/languages/
├── maneli-car-inquiry-fa_IR.mo
├── maneli-car-inquiry-fa_IR.po
├── maneli-car-inquiry-fa.mo
└── maneli-car-inquiry-fa.po
```

### 2. فایل اصلاح شده
```
wp-content/plugins/maneli-car-inquiry/includes/class-maneli-car-inquiry.php
```

---

## ✅ مرحله 4: پاک کردن کش

بعد از آپلود، این کارها را انجام دهید:

1. **پاک کردن کش وردپرس:**
   - اگر از پلاگین کش (مثل WP Super Cache, W3 Total Cache) استفاده می‌کنید، کش را پاک کنید

2. **پاک کردن کش مرورگر:**
   - `Ctrl + Shift + Delete` یا `Cmd + Shift + Delete`
   - یا از حالت Incognito/Private استفاده کنید

3. **غیرفعال و فعال کردن پلاگین:**
   - به `افزونه‌ها > افزونه‌های نصب شده` بروید
   - پلاگین `Maneli Car Inquiry Core` را غیرفعال کنید
   - دوباره فعالش کنید

---

## ✅ مرحله 5: تست ترجمه

### روش 1: استفاده از فایل تست
فایل `test-translation.php` را به مسیر زیر آپلود کنید:
```
wp-content/plugins/maneli-car-inquiry/test-translation.php
```

سپس از مرورگر به این آدرس بروید:
```
https://yoursite.com/wp-content/plugins/maneli-car-inquiry/test-translation.php
```

این صفحه به شما نشان می‌دهد:
- ✓ زبان فعلی وردپرس
- ✓ فایل‌های ترجمه موجود
- ✓ آیا ترجمه بارگذاری شده یا نه
- ✓ تست چند کلمه نمونه

### روش 2: بازدید از صفحات پلاگین
به هر صفحه‌ای از پلاگین بروید و چک کنید که متن‌ها فارسی شده‌اند.

---

## 🔧 رفع مشکلات رایج

### مشکل 1: همه چیز هنوز انگلیسی است
**راه حل:**
1. مطمئن شوید `WPLANG` در `wp-config.php` روی `fa_IR` است
2. فایل `.mo` را بررسی کنید (باید حدود 49KB باشد)
3. کش را پاک کنید
4. پلاگین را غیرفعال و فعال کنید

### مشکل 2: برخی متن‌ها فارسی، برخی انگلیسی
**راه حل:**
- این طبیعی است! شاید برخی متن‌ها در فایل ترجمه نباشند
- لیست متن‌های انگلیسی را برای من ارسال کنید تا اضافه کنم

### مشکل 3: خطای "Translation loading was called incorrectly"
**راه حل:**
- این خطا با آپدیت فایل `class-maneli-car-inquiry.php` حل شده است
- مطمئن شوید نسخه جدید را آپلود کرده‌اید

### مشکل 4: کاراکترهای فارسی به صورت ??? نمایش داده می‌شوند
**راه حل:**
1. بررسی کنید که charset پایگاه داده `utf8mb4` باشد
2. در `wp-config.php` این خطوط را چک کنید:
```php
define('DB_CHARSET', 'utf8mb4');
define('DB_COLLATE', 'utf8mb4_persian_ci');
```

---

## 📝 فایل‌های کمکی

### test-translation.php
برای تست و دیباگ ترجمه - نشان می‌دهد چه فایل‌هایی بارگذاری شده‌اند

### force-persian.php  
برای تست اجباری ترجمه فارسی بدون تغییر تنظیمات وردپرس

---

## ✅ چک‌لیست نهایی

- [ ] زبان وردپرس روی فارسی تنظیم شده (Settings > General)
- [ ] فایل `maneli-car-inquiry-fa_IR.mo` در پوشه languages وجود دارد
- [ ] فایل `class-maneli-car-inquiry.php` آپدیت شده
- [ ] کش پاک شده
- [ ] پلاگین یک بار غیرفعال و فعال شده
- [ ] تست شده (test-translation.php)

---

## 🆘 اگر هنوز کار نکرد

اگر بعد از انجام تمام مراحل بالا هنوز ترجمه کار نکرد:

1. فایل `test-translation.php` را اجرا کنید
2. اسکرین‌شات از نتیجه بگیرید
3. محتوای `wp-config.php` (قسمت زبان) را بررسی کنید
4. با اطلاعات بالا تماس بگیرید

---

## 📞 پشتیبانی

اگر مشکلی پیش آمد، این اطلاعات را ارسال کنید:
- نسخه وردپرس
- نسخه PHP
- خروجی `test-translation.php`
- تنظیمات زبان از `Settings > General`

