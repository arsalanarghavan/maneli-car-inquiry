# 📊 راهنمای شورتکد گزارشات سیستم

## نمای کلی

شورتکد `[maneli_system_report]` یک ابزار قدرتمند برای نمایش **گزارشات سیستم در صفحات و پست‌های وردپرس** است.

---

## 🚀 استفاده ساده

### حالت پیش‌فرض

```
[maneli_system_report]
```

این کد نمایش می‌دهد:
- ✅ کارت‌های آماری (9 کارت)
- ✅ نمودار روند روزانه
- ✅ محصولات پرطرفدار (5 محصول)
- ✅ آمار کارشناسان (فقط برای مدیران)
- ✅ آمار 30 روز گذشته

---

## 🎛️ پارامترهای شورتکد

### 1. تعداد روز (days)

تعیین بازه زمانی گزارش

**استفاده:**
```
[maneli_system_report days="7"]
```

**مقادیر ممکن:**
- `7` - یک هفته گذشته
- `30` - یک ماه گذشته (پیش‌فرض)
- `60` - دو ماه گذشته
- `90` - سه ماه گذشته
- `365` - یک سال گذشته
- هر عدد دیگر

**مثال:**
```
[maneli_system_report days="14"]  <!-- آمار 14 روز گذشته -->
```

---

### 2. نمایش نمودارها (show_charts)

فعال/غیرفعال کردن نمایش نمودار روند

**استفاده:**
```
[maneli_system_report show_charts="no"]
```

**مقادیر ممکن:**
- `yes` - نمایش نمودار (پیش‌فرض)
- `no` - عدم نمایش نمودار

**مثال:**
```
[maneli_system_report show_charts="no"]  <!-- بدون نمودار -->
```

---

### 3. نمایش آمار کارشناسان (show_experts)

فعال/غیرفعال کردن نمایش جدول کارشناسان

**استفاده:**
```
[maneli_system_report show_experts="no"]
```

**مقادیر ممکن:**
- `yes` - نمایش آمار کارشناسان (پیش‌فرض)
- `no` - عدم نمایش

**توجه:** این بخش فقط برای **مدیران** نمایش داده می‌شود، کارشناسان نمی‌توانند آمار دیگران را ببینند.

**مثال:**
```
[maneli_system_report show_experts="no"]  <!-- بدون آمار کارشناسان -->
```

---

### 4. کارشناس خاص (expert_id)

نمایش آمار یک کارشناس مشخص

**استفاده:**
```
[maneli_system_report expert_id="123"]
```

**مقادیر ممکن:**
- شناسه عددی کاربر (User ID)
- خالی - برای نمایش کل سیستم (پیش‌فرض)

**توجه:** اگر کاربر خود کارشناس باشد، به صورت خودکار فقط آمار خودش نمایش داده می‌شود.

**مثال:**
```
[maneli_system_report expert_id="456"]  <!-- فقط آمار کارشناس 456 -->
```

---

## 💡 مثال‌های کاربردی

### مثال 1: گزارش ساده هفتگی

```
[maneli_system_report days="7"]
```

نمایش آمار 7 روز گذشته با تمام ویژگی‌ها

---

### مثال 2: گزارش فشرده

```
[maneli_system_report days="30" show_charts="no" show_experts="no"]
```

فقط کارت‌های آماری و محصولات پرطرفدار

---

### مثال 3: گزارش یک کارشناس خاص

```
[maneli_system_report expert_id="123" days="60"]
```

آمار 60 روز گذشته یک کارشناس

---

### مثال 4: گزارش سه ماهه کامل

```
[maneli_system_report days="90" show_charts="yes" show_experts="yes"]
```

گزارش کامل 3 ماهه با تمام جزئیات

---

### مثال 5: گزارش سالانه بدون نمودار

```
[maneli_system_report days="365" show_charts="no"]
```

آمار سال گذشته بدون نمودار (برای سرعت بیشتر)

---

## 🎯 موارد استفاده

### 1. صفحه داشبورد کاربران

ایجاد یک صفحه با عنوان "داشبورد من" و قرار دادن شورتکد:

```
[maneli_system_report]
```

هر کاربر فقط آمار خودش را می‌بیند:
- **مدیران**: آمار کل سیستم
- **کارشناسان**: فقط آمار خودشان
- **کاربران عادی**: پیغام عدم دسترسی

---

### 2. گزارش عملکرد ماهانه

ایجاد صفحه "گزارش ماهانه" برای مدیریت:

```
<h2>گزارش عملکرد ماهانه</h2>

[maneli_system_report days="30" show_experts="yes"]
```

---

### 3. ویجت سایدبار

افزودن به ویجت Text:

```
<div class="sidebar-report">
    <h3>آمار هفتگی</h3>
    [maneli_system_report days="7" show_charts="no" show_experts="no"]
</div>
```

---

### 4. صفحه مقایسه کارشناسان

ایجاد چند بخش برای مقایسه:

```
<h2>مقایسه عملکرد کارشناسان</h2>

<h3>کارشناس اول</h3>
[maneli_system_report expert_id="123" days="30" show_charts="no"]

<h3>کارشناس دوم</h3>
[maneli_system_report expert_id="456" days="30" show_charts="no"]
```

---

## 🔒 دسترسی‌ها

### سطوح دسترسی

| نقش | دسترسی |
|-----|--------|
| **مدیر** | ✅ آمار کل سیستم<br>✅ نمایش همه کارشناسان<br>✅ مشاهده آمار هر کارشناس |
| **کارشناس** | ✅ فقط آمار خودش<br>⛔ نمی‌تواند آمار دیگران را ببیند |
| **مشتری** | ⛔ بدون دسترسی |

### بررسی خودکار

شورتکد به صورت خودکار:
- ✅ دسترسی را چک می‌کند
- ✅ برای کارشناسان فقط آمار خودشان را نمایش می‌دهد
- ✅ برای کاربران بدون دسترسی پیغام خطا نمایش می‌دهد

---

## 🎨 ظاهر و استایل

### استایل‌های پیش‌فرض

شورتکد با استایل‌های زیبا و حرفه‌ای ارائه می‌شود:

- ✅ طراحی واکنش‌گرا (Responsive)
- ✅ انیمیشن‌های نرم
- ✅ رنگ‌بندی متمایز
- ✅ آیکون‌های واضح
- ✅ سازگار با تم‌های مختلف

### سفارشی‌سازی CSS

برای تغییر ظاهر، می‌توانید CSS سفارشی اضافه کنید:

```css
/* در فایل style.css تم خود */
.maneli-system-report-shortcode {
    background: #f0f0f0;
}

.stat-card {
    border-radius: 15px;
}

.stat-value {
    font-size: 32px;
    color: #0066cc;
}
```

---

## 📱 سازگاری

### مرورگرها
✅ Chrome, Firefox, Safari, Edge

### دستگاه‌ها
✅ Desktop, Laptop, Tablet, Mobile

### تم‌ها
✅ سازگار با همه تم‌های وردپرس

---

## 🐛 عیب‌یابی

### مشکل: شورتکد نمایش داده نمی‌شود

**راه‌حل:**
1. بررسی دسترسی کاربر
2. فعال بودن پلاگین را چک کنید
3. Clear Cache

---

### مشکل: نمودار نمایش داده نمی‌شود

**راه‌حل:**
1. از `show_charts="yes"` استفاده کنید
2. بررسی اتصال به اینترنت (برای بارگذاری Chart.js)
3. غیرفعال کردن AdBlocker

---

### مشکل: آمار کارشناسان نمایش داده نمی‌شود

**راه‌حل:**
1. فقط **مدیران** می‌توانند این بخش را ببینند
2. از `show_experts="yes"` استفاده کنید
3. پارامتر `expert_id` نباید تنظیم شده باشد

---

## 📊 مثال کامل

### ایجاد صفحه گزارشات حرفه‌ای

```html
<div class="maneli-reports-page">
    <h1>گزارشات سیستم</h1>
    <p>نمای کلی از عملکرد سیستم در 30 روز گذشته</p>
    
    [maneli_system_report days="30" show_charts="yes" show_experts="yes"]
    
    <hr>
    
    <h2>گزارش هفتگی</h2>
    <p>آمار فشرده 7 روز اخیر</p>
    
    [maneli_system_report days="7" show_charts="no" show_experts="no"]
</div>
```

---

## 💻 استفاده در کد PHP

اگر می‌خواهید شورتکد را در فایل‌های PHP استفاده کنید:

```php
// در فایل template
<?php echo do_shortcode('[maneli_system_report days="30"]'); ?>

// با متغیر
$days = 60;
echo do_shortcode("[maneli_system_report days='{$days}']");

// برای کاربر خاص
$user_id = get_current_user_id();
echo do_shortcode("[maneli_system_report expert_id='{$user_id}']");
```

---

## 🔗 ارتباط با API

اگر نیاز به دسترسی برنامه‌نویسی به داده‌ها دارید:

```php
// استفاده مستقیم از کلاس
require_once MANELI_INQUIRY_PLUGIN_PATH . 'includes/class-reports-dashboard.php';

$stats = Maneli_Reports_Dashboard::get_overall_statistics(
    date('Y-m-d', strtotime('-30 days')),
    date('Y-m-d'),
    null
);

print_r($stats);
```

برای اطلاعات بیشتر: [مستندات API](REPORTS-API-DOCUMENTATION.md)

---

## 📚 منابع مرتبط

- [راهنمای کامل گزارشات](REPORTS-README.md)
- [مستندات API](REPORTS-API-DOCUMENTATION.md)
- [راهنمای سریع](REPORTS-QUICK-START.md)

---

## ✅ خلاصه

شورتکد `[maneli_system_report]` به شما امکان می‌دهد:

✨ گزارشات جامع را در هر صفحه نمایش دهید  
✨ بازه زمانی دلخواه را انتخاب کنید  
✨ نمایش را سفارشی کنید  
✨ دسترسی خودکار را مدیریت کنید  
✨ ظاهر زیبا و حرفه‌ای داشته باشید  

---

**نسخه**: 2.0.0  
**آخرین به‌روزرسانی**: 16 اکتبر 2025  
**سازگاری**: WordPress 5.0+, PHP 7.4+

